<html>
<head>
<title>MIPS</title>

<!-- latex math javascript-->
<script 
id="MathJax-script"
async src="https://cdn.jsdelivr.net/npm/mathjax@3.0.1/es5/tex-mml-chtml.js">
</script>
<!-- open raw text -->
<script charset="utf-8">
function graph(name){
	var file = "src/" + name;
	window.open(file);
}
</script>

<link rel="stylesheet" type="text/css" href="https://ahsjlin.github.io/html_head/css/a/blue.css">
<link rel="stylesheet" type="text/css" href="https://ahsjlin.github.io/html_head/css/table/block.css">
<link rel="stylesheet" type="text/css" href="https://ahsjlin.github.io/html_head/css/code/code_color.css">
<link rel="stylesheet" href="//cdnjs.cloudflare.com/ajax/libs/highlight.js/11.5.1/styles/default.min.css">
<script src="//cdnjs.cloudflare.com/ajax/libs/highlight.js/11.5.1/highlight.min.js"></script>
<script>hljs.highlightAll();</script>

</head>
<body>
<h2>MIPS 模擬器:<a href="https://courses.missouristate.edu/kenvollmar/mars/download.htm" target="_blank">Mars</a>(需要安裝java)</h2>
<!-- <img src="./img/mars_simulator.png" width="80%" alt=""/> -->
<hr>
register: s* 
<br>
使用一些function時，不去修改裡面內容的register。<br>
ex.<br>
<pre><code class="">sub $t0, $s0, $s1 </code></pre>

<hr>
<h3>Printing "Hello World!"</h3>
<pre><code class="">.data
    myMessage: .asciiz "Hello World!"
.text
    li $v0, 4 # Tell system to get ready.
    la $a0, myMessage # Loading address.
    syscall # Tell system to do it.
</code></pre>
<ul>
	<li>"Run" - "Assembly"</li>
	<li>Click "Execute"</li>
	<li>Run the current program.</li>
</ul>
or
<ul>
	<li>f3</li>
	<li>f5</li>
</ul>

<hr>
<h3>Printing a Character</h3>
<pre><code class="">.data
    myMessage: .byte 'm'
.text
    li $v0, 4
    la $a0, myMessage
    syscall
</code></pre>
<hr>
<h3>Printing an Integer</h3>
<pre><code class="">.data
    level: .word 999
.text
    li $v0, 1 # Tell system to get ready (an integer or a word).
    lw $a0, level
    syscall</code></pre>
Output: 999

<hr>
<h3>Printing a Float</h3>
<pre><code class="">.data
    PI: .float 3.14
.text
    li   $v0 , 2
    lwc1 $f12, PI
    syscall </code></pre>
* $f12
<hr>
<h3>Printing a double</h3>
<pre><code class="">.data
    myDouble:   .double 1.618
    zeroDouble: .double 0.0
.text
    # Loading data from the location of random memory.
    ldc1 $f2, myDouble
    ldc1 $f0, zeroDouble
    
    # Tell system to get ready.
    li $v0, 3
    
    # Print result from $f12.
    add.d $f12, $f2, $f0
    
    syscall</code></pre>
<hr>
<h3>Adding integers and Printing it</h3>
<pre><code class="">.data
    number1: .word 5
    number2: .word 3
.text
    lw $t0, number1($zero)
    lw $t1, number2($zero)
    
    add $t2, $t0, $t1    # t2 = t0 + t1
    
    # Tell system to print a integer.
    li $v0, 1
    
    add $a0, $zero, $t2
    syscall</code></pre>
Output: 8
<hr>
<h3>Printing an Integer by "move"</h3>
<pre><code class="">.data
    number1: .word 10
    number2: .word 8
.text
    lw $s0, number1    # s0 = 10
    lw $s1, number2    # s1 = 8
    
    sub, $t0, $s0, $s1 # t0 = s0 - s1, t0 = 10 - 8
    
    # Tell system to print an integer.
    li $v0, 1
    # move is a pseudoinstruction
    move $a0, $t0      # a0 = t0, the system prints something from the argument.
    syscall</code></pre>
Output: 2
<hr>
<h3>Multiplying Integers</h3>
<pre><code class="">.data

.text
    addi $s0, $zero, 10
    addi $s1, $zero, 4
    
    mul $t0, $s0, $s1
    
    li $v0, 1
    add $a0, $zero, $t0
    syscall</code></pre>
Output: 40

<h3>More Bigger Value by Multiplying</h3>
<pre><code class="">.data

.text
    addi $t0, $zero, 20000
    addi $t1, $zero, 30
    
    # The product is in the "lo" register
    mult $t0, $t1
    
    # Move from "lo".
    mflo $s0
    
    # Display multiplication result.
    li $v0, 1
    add $a0, $zero, $s0
    syscall</code></pre>
<hr>
<h3>Multiplying by sll</h3>
<pre><code class="">.data

.text
    addi $s0, $zero, 4
    sll $t0, $s0, 3 # multiply 2^3 = 8
    
    # Display result
    li $v0, 1
    add $a0, $zero, $t0
    syscall</code></pre>

<hr>
<h3>Dividing by div</h3>
<pre><code class="">.data

.text
    addi $t0, $zero, 20
    addi $t1, $zero, 4
    
    div, $s0, $t0, $t1
    
    #Display result by dividing
    li $v0, 1
    add $a0, $zero, $s0
    syscall</code></pre>

<hr>
<h3>Dividing Integers and Display Quotient/Remainder</h3>
<pre><code class="">.data

.text
    addi $t0, $zero, 33
    addi $t1, $zero, 6
    
    div $t0, $t1
    
    mflo $s0 # Quotient
    mfhi $s1 # Remainder
    
    # Display Quotient
    li $v0, 1
    add $a0, $zero, $s0 
    syscall
    
    # Display Remainder
    li $v0, 1
    add $a0, $zero, $s1
    syscall</code></pre>

<hr>
<h3>Function</h3>
<pre><code class="">.data
    msg: .asciiz "Hi, everybody.\nMy name is Jay."
.text
    main:
        # Jump and link (Call the function)
        jal displayMessage
    
    # Tell the system that the program is done.
    li $v0, 10
    syscall
    
    # Function
    displayMessage:
        li $v0, 4
        la $a0, msg
        syscall
        
        # Go back where you call.
        jr $ra</code></pre>

<h3>Passing parameters into function</h3>
<pre><code class="">.data

.text
    main:
        # The a* is stroages arguments
        addi $a1, $zero, 10
        addi $a2, $zero, 5
        
        jal addNumber
        jal printInteger
    
    # Tell the system that the program is done.
    li $v0, 10
    syscall
    
    # Adding number
    addNumber:
        add $v1, $a1, $a2
    
        jr $ra
        
    # Printing Integer
    printInteger:
        li $v0, 1
        add $a0, $v1, $zero
        # or
        # addi $a0, $v1, 0
        
        syscall
        
        jr $ra</code></pre>

<hr>
<h3>Stack</h3>
<pre><code class="">.data
    newLine: .asciiz "\n"
.text
    main:
        # setting value 10 in $s0
        addi $s0, $zero, 10
        
        
        # jump to function
        jal increaseRegiter
        
        # printing new line
        li $v0, 4
        la $a0, newLine
        syscall
        
        # printing value
        li $v0, 1
        move $a0, $s0
        syscall
    
    # Tell the system that the program is done.
    li $v0, 10
    syscall
    
    
    increaseRegiter:
        # Push
	# Move stack pointer address decrease 4 bytes
	# Because a register's contain is 4-byte for MIPS.
        addi $sp, $sp, -4 
        sw $s0, 0($sp) # Write $s0's value into stack pointer address.
        
        # Do something on $s0.
        addi, $s0, $s0, 30

        # print value
        li $v0, 1
        add $a0, $zero, $s0
        syscall
        
	# Pop back to the  original location.
        lw $s0, 0($sp) # Get back the contain of stack pointer address.
        addi $sp, $sp, 4 # Move stack pointer address increase 4 bytes.
        
        
        jr $ra
        
    </code></pre>
Output: <br>
40<br>
10
<hr>
<h3>Nested Procedure</h3>
<pre><code class="">.data
    newLine: .asciiz "\n"
.text
    main:
         addi $s0, $zero, 10
         
         jal increaseNumber
         
         
         # print integer
         jal printInteger
         
         
    # done
    li $v0, 10
    syscall
    
    increaseNumber:
        # push
        # a register's contain in MIPS is 4-byte.
        addi $sp, $sp, -8
        sw $s0, 0($sp)
        sw $ra, 4($sp)
        
        # do something on $s0
        addi $s0, $s0, 30
        
        # call printInteger
        jal printInteger
        
        
        # pop back
        lw $s0, 0($sp)
        lw $ra, 4($sp)
        
        
        addi $sp, $sp, 8
        jr $ra
        
    printInteger:
        li $v0, 1
        add $a0, $s0, $zero
        syscall
        
        # print new line
        li $v0, 4
        la $a0, newLine
        syscall
        
        jr $ra</code></pre>
Output: <br>
40<br>
10
<hr>
<h3>Getting user's input with integer.</h3>
<pre><code class="">.data

.text
    # Get user's input into $v0
    li $v0, 5
    syscall
    
    # Store input integer
    # move is a pseudoinstruction
    move, $t0, $v0
    
    # print it
    li $v0, 1
    add $a0, $zero, $t0
    syscall</code></pre>


<hr>
<footer>
<h2>Reference</h2>

</footer>

</body>
</html>
